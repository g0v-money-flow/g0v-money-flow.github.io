{"version":3,"sources":["webpack:///./src/components/regions_links.js","webpack:///./src/pages/elections.js"],"names":["RegionsLinks","props","regionsLinks","regions","map","region","urlPrefix","regionName","name","constituencyName","firstConstituency","render","className","styles","this","React","Component","RegionLink","regionLink","to","query","Election","data","replace","toLowerCase","console","log","title","includes","YearsList","yearsArray","allElectionsJsonData","nodes","election","year","yearsList","Set","href","ElectionBlocks","electionBlocks","concat","apply","electionTitle","fixed","flagImage","childImageSharp","decorationImage","ElectionsIndexPage","boxImage","style","float"],"mappings":"6UAIMA,E,oBACJ,WAAYC,GAAQ,IAAD,SACjB,cAAMA,IAAN,MACKC,aAAe,EAAKD,MAAME,QAAQC,KAAI,SAACC,GAAD,OACzC,kBAAC,EAAD,CAAYC,UAAY,EAAKL,MAAMK,UAAYC,WAAYF,EAAOG,KAAMC,iBAAkBJ,EAAOK,uBAHlF,E,0GAMnBC,OAAA,WACE,OACE,wBAAIC,UAAWC,IAAOX,cAAgBY,KAAKZ,e,GATtBa,IAAMC,WAcpBC,EAAa,SAAC,GAAiD,IAA/CX,EAA8C,EAA9CA,UAAWC,EAAmC,EAAnCA,WAAYE,EAAuB,EAAvBA,iBAClD,OACE,wBAAIG,UAAWC,IAAOK,YACpB,kBAAC,OAAD,CAAMC,GAAE,IAAOb,EAAP,YAA4BC,EAA5B,mBAAyDE,GAAuBF,KAK/EP,I,qfClBR,IAAMoB,EAAK,aA4BZC,EACJ,SAAYC,GAGV,OAFAR,KAAKN,KAAOc,EAAKd,KAAKe,QAAQ,MAAO,KAAKC,cAC1CC,QAAQC,IAAIJ,EAAKd,MACVc,EAAKd,MACV,IAAK,2BACHM,KAAKa,MAAQ,cACb,MACF,IAAK,0BACHb,KAAKa,MAAQ,YACb,MACF,IAAK,wBACHb,KAAKa,MAAQ,cACb,MACF,IAAK,wBACHb,KAAKa,MAAQ,cACb,MACF,IAAK,sBACHb,KAAKa,MAAQ,aACb,MACF,IAAK,sBACHb,KAAKa,MAAQ,aACb,MACF,IAAK,8BACHb,KAAKa,MAAQ,cACb,MACF,IAAK,6BACHb,KAAKa,MAAQ,aACb,MACF,IAAK,uCACHb,KAAKa,MAAQ,gBACb,MACF,QACEL,EAAKK,MAAQL,EAAKd,KAEtBM,KAAKX,QAAUmB,EAAKnB,QAAQC,KAAI,SAACC,GAC/B,IAAIK,EAAoB,QAOxB,MANG,CAAC,KAAM,OAAQ,QAAQkB,SAASvB,EAAOG,MACxCE,EAAoB,KACE,wBAAdY,EAAKd,MAAgD,wBAAdc,EAAKd,OACpDiB,QAAQC,IAAIJ,EAAKd,MACjBE,EAAoBL,EAAOG,MAEtB,CACLA,KAAMH,EAAOG,KACbE,kBAAmBA,OAwBdmB,EAAY,SAAC,GAAc,IAChCC,EAD+B,EAAXR,KACFS,qBAAqBC,MAAM5B,KAAI,SAAC6B,GAAD,OAAeA,EAASC,QACzEC,EAAY,EAAI,IAAIC,IAAIN,IAAa1B,KAAI,SAAC8B,GAAD,OAC7C,4BACE,uBAAGG,KAAK,KACJH,OAIR,OACE,6BACE,wBAAItB,UAAYC,IAAOsB,WACnBA,KAMGG,EAAiB,SAAC,GAAc,IAAZhB,EAAW,EAAXA,KAEzBiB,EADY,GAAGC,OAAOC,MAAM,GAAInB,EAAKS,qBAAqBC,MAAM5B,KAAI,SAAC6B,GAAD,OAAe,IAAIZ,EAASY,OACrE7B,KAAI,SAAC6B,GACpC,OACE,6BACE,wBAAIrB,UAAYC,IAAO6B,eACrB,kBAAC,IAAD,CAAKC,MAAQrB,EAAKsB,UAAUC,gBAAgBF,MAAQ/B,UAAYC,IAAOiC,kBACrEb,EAASN,OAEb,kBAAC,EAAD,CAAcxB,QAAU8B,EAAS9B,QACnBG,UAAS,aAAgB2B,EAASzB,WAItD,OACE,yBAAKI,UAAWC,IAAO0B,gBACnBA,IAMOQ,UA1DY,SAAC,GAAc,IAAZzB,EAAW,EAAXA,KAC5B,OACE,kBAAC,IAAD,KACE,kBAAC,OAAD,CAAMH,GAAG,KAAK,QACd,kBAAC,IAAD,CAAKQ,MAAM,SAEX,kBAAC,EAAD,CAAgBL,KAAOA,IACvB,kBAAC,IAAD,CAAKqB,MAAQrB,EAAK0B,SAASH,gBAAgBF,MACtCM,MACE,CACEC,MAAM","file":"component---src-pages-elections-js-9a6bfef09194483b3d5c.js","sourcesContent":["import React from 'react'\nimport { Link } from \"gatsby\"\nimport styles from '../stylesheets/regions_links.module.sass'\n\nclass RegionsLinks extends React.Component {\n  constructor(props) {\n    super(props)\n    this.regionsLinks = this.props.regions.map((region) => (\n      <RegionLink urlPrefix={ this.props.urlPrefix } regionName={region.name} constituencyName={region.firstConstituency} />\n    ))\n  }\n  render() {\n    return (\n      <ul className={styles.regionsLinks}>{ this.regionsLinks }</ul>\n    )\n  }\n}\n\nexport const RegionLink = ({ urlPrefix, regionName, constituencyName }) => {\n  return (\n    <li className={styles.regionLink}>\n      <Link to={ `/${urlPrefix}/regions/${regionName}/constituencies/${constituencyName}` }>{ regionName }</Link>\n    </li>\n  )\n}\n\nexport default RegionsLinks\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\nimport Img from \"gatsby-image\"\nimport Layout from \"../components/layout\"\nimport RegionsLinks from \"../components/regions_links\"\nimport SEO from \"../components/seo\"\nimport styles from '../stylesheets/elections.module.sass'\n\nexport const query = graphql`\n  query {\n    allElectionsJsonData(filter: { name: { ne: null } }) {\n      nodes {\n        year\n        name\n        regions {\n          name\n        }\n      }\n    }\n    flagImage: file(relativePath: { eq: \"flag.png\" }) {\n      childImageSharp {\n        fixed(width: 36) {\n          ...GatsbyImageSharpFixed\n        }\n      }\n    }\n    boxImage: file(relativePath: { eq: \"box.png\" }) {\n      childImageSharp {\n        fixed(width: 108) {\n          ...GatsbyImageSharpFixed\n        }\n      }\n    }\n  }\n`\n\nclass Election {\n  constructor(data) {\n    this.name = data.name.replace(/\\s/g, '-').toLowerCase()\n    console.log(data.name);\n    switch(data.name) {\n      case '2016 Legislator Election':\n        this.title = '2016 立法委員選舉'\n        break;\n      case '2016 President Election':\n        this.title = '2016 總統選舉'\n        break;\n      case '2014 Council Election':\n        this.title = '2014 縣市議員選舉'\n        break;\n      case '2018 Council Election':\n        this.title = '2018 縣市議員選舉'\n        break;\n      case '2014 Mayor Election':\n        this.title = '2014 縣市長選舉'\n        break;\n      case '2018 Mayor Election':\n        this.title = '2018 縣市長選舉'\n        break;\n      case '2018 Townshipmayor Election':\n        this.title = '2018 鄉鎮市長選舉'\n        break;\n      case '2018 Villagechief Election':\n        this.title = '2018 村里長選舉'\n        break;\n      case '2018 Townshiprepresentative Election':\n        this.title = '2018 鄉鎮市民代表選舉'\n        break;\n      default:\n        data.title = data.name\n    }\n    this.regions = data.regions.map((region) => {\n      let firstConstituency = '第01選區'\n      if(['全國', '山地立委', '平地立委'].includes(region.name)) {\n        firstConstituency = '全國'\n      } else if(data.name === '2018 Mayor Election' || data.name === '2014 Mayor Election') {\n        console.log(data.name)\n        firstConstituency = region.name\n      }\n      return({\n        name: region.name,\n        firstConstituency: firstConstituency\n      })\n    })\n  }\n}\n\nconst ElectionsIndexPage = ({ data }) => {\n  return (\n    <Layout>\n      <Link to=\"/\">{'< 返回'}</Link>\n      <SEO title=\"選舉金流\" />\n      {/* <YearsList data={ data } /> */}\n      <ElectionBlocks data={ data } />\n      <Img fixed={ data.boxImage.childImageSharp.fixed }\n           style={\n             { \n               float: `right`\n             }\n           } />\n    </Layout>\n\n  )\n}\n\nexport const YearsList = ({ data }) => {\n  const yearsArray = data.allElectionsJsonData.nodes.map((election) => (election.year))\n  const yearsList = [...new Set(yearsArray)].map((year) => (\n    <li>\n      <a href=\"#\">\n        { year }\n      </a>\n    </li>\n  ))\n  return (\n    <div>\n      <ul className={ styles.yearsList }>\n        { yearsList }\n      </ul>\n    </div>\n  )\n}\n\nexport const ElectionBlocks = ({ data }) => {\n  const elections = [].concat.apply([], data.allElectionsJsonData.nodes.map((election) => (new Election(election))))\n  const electionBlocks = elections.map((election) => {\n    return (\n      <div>\n        <h3 className={ styles.electionTitle }>\n          <Img fixed={ data.flagImage.childImageSharp.fixed } className={ styles.decorationImage } />\n          { election.title }\n        </h3>\n        <RegionsLinks regions={ election.regions }\n                      urlPrefix={ `elections/${election.name}` } />\n      </div>\n    )\n  })\n  return (\n    <div className={styles.electionBlocks}>\n      { electionBlocks }\n    </div>\n  )\n}\n\n\nexport default ElectionsIndexPage\n"],"sourceRoot":""}