{"version":3,"sources":["webpack:///./src/components/referendum_finance_data.js","webpack:///./src/pages/referendums.js","webpack:///./src/stylesheets/referendum.module.sass"],"names":["incomeColorsSet","outcomeColorsSet","ReferendumFinanceData","financeData","referendumName","incomeTitles","income","items","map","item","name","incomeAmounts","amount","unshift","this","outcomeTitles","outcome","outcomeAmounts","incomeTotal","Intl","NumberFormat","style","currency","minimumFractionDigits","format","total","outcomeTotal","ReferendumFinanceBlock","finance","className","styles","candidateFinanceBlock","candidateFinanceDetailBlock","height","chartType","loader","data","options","title","isStacked","hAxis","textPosition","minValue","legend","position","colors","ReferendumsFinanceCompareChart","referendumFinanceDatas","referendums","referendum","no","incomeDatas","referendumFinanceData","outcomeDatas","candidatesFinanceCompareChart","candidatesFinanceCompareChartWrapper","vAxis","query","ReferendumBlock","referendumBlock","referendumInfoWrapper","referendumContent","content","passed","affirmative","negative","rate_of_vote","ReferendumsIndexPage","referendumblocks","allReferendumsJson","nodes","pageHeading","fixed","flagImage","childImageSharp","decorationImage","module","exports"],"mappings":"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","file":"component---src-pages-referendums-js-4c8d3ce04bbd5c317b50.js","sourcesContent":["import React from 'react'\nimport styles from \"../stylesheets/constituency.module.sass\"\nimport Chart from 'react-google-charts'\nexport const incomeColorsSet = ['#70add1', '#fec58c', '#e49ea2', '#8b8181', '#c6e1c2']\nexport const outcomeColorsSet = ['#70add1', '#b4cedf', '#fc8916', '#fee8d0', '#e49ea2', '#f0cacd', '#8b8181', '#cbcbcb', '#c6e1c2', '#eaf4e9']\n\nexport class ReferendumFinanceData {\n  constructor(financeData, referendumName) {\n    let incomeTitles = financeData.income.items.map((item) => (item.name))\n    let incomeAmounts = financeData.income.items.map((item) => (item.amount || 0))\n    referendumName = referendumName || ''\n    incomeTitles.unshift('收入分佈')\n    incomeAmounts.unshift(referendumName)\n    this.incomeTitles = incomeTitles\n    this.incomeAmounts = incomeAmounts\n    let outcomeTitles = financeData.outcome.items.map((item) => (item.name))\n    let outcomeAmounts = financeData.outcome.items.map((item) => (item.amount || 0))\n    outcomeTitles.unshift('支出分佈')\n    outcomeAmounts.unshift(referendumName)\n    this.outcomeTitles = outcomeTitles\n    this.outcomeAmounts = outcomeAmounts\n    this.incomeTotal = new Intl.NumberFormat('zh-Hans-TW', {\n      style: 'currency',\n      currency: 'TWD',\n      minimumFractionDigits: 0\n    }).format(financeData.income.total)\n    this.outcomeTotal = new Intl.NumberFormat('zh-Hans-TW', {\n      style: 'currency',\n      currency: 'TWD',\n      minimumFractionDigits: 0\n    }).format(financeData.outcome.total)\n  }\n}\n\nexport const ReferendumFinanceBlock = ({ finance }) => {\n  finance = finance || {\n    income: {\n      total: 0,\n      items: [{ name: '無資料', amount: 0 }]\n    },\n    outcome: {\n      total: 0,\n      items: [{ name: '無資料', amount: 0 }]\n    }\n  }\n  let financeData = new ReferendumFinanceData(finance)\n  return (\n    <div className={ styles.candidateFinanceBlock }>\n      <div className={ styles.candidateFinanceDetailBlock }>\n        <Chart\n          height={'100px'}\n          chartType=\"BarChart\"\n          loader={<div>Loading Chart</div>}\n          data={ \n            [financeData.incomeTitles, financeData.incomeAmounts ]\n          }\n          options={{\n            title: null,\n            isStacked: 'relative',\n            hAxis: {\n              textPosition: 'none',\n              minValue: 0,\n            },\n            legend: { position: 'none' },\n            colors: incomeColorsSet\n          }}\n        />\n        <h6>總收入: { financeData.incomeTotal }</h6>\n      </div>\n      <div className={ styles.candidateFinanceDetailBlock }>\n        <Chart\n          height={'100px'}\n          chartType=\"BarChart\"\n          loader={<div>Loading Chart</div>}\n          data = {\n            [financeData.outcomeTitles, financeData.outcomeAmounts]\n          }\n          options={{\n            title: null,\n            isStacked: 'relative',\n            hAxis: {\n              textPosition: 'none',\n              minValue: 0,\n            },\n            legend: {\n              position: 'none'\n            },\n            colors: outcomeColorsSet            \n          }}\n        />\n        <h6>總支出: { financeData.outcomeTotal }</h6>\n      </div>\n    </div>\n  )\n}\n\nexport const ReferendumsFinanceCompareChart = ({ referendums }) => {\n  const referendumFinanceDatas = referendums.map((referendum) => {\n    let finance = referendum.finance || {\n      income: {\n        total: 0,\n        items: [\n          { name: \"個人捐贈收入\", amount: 0 },\n          { name: \"營利事業捐贈收入\", amount: 0 },\n          { name: \"政黨或人民團體捐贈收入\", \"amount\": 0 },\n          { name: \"募集活動收入\", amount: 0 },\n          { name: \"其他收入\", amount: 0 }\n        ]\n      },\n      outcome: {\n        total: 0,\n        items: [\n          { name: \"宣傳類支出\", amount: 0 },\n          { name: \"宣傳車輛類支出\", amount: 0 },\n          { name: \"辦事處類支出\", amount: 0 },\n          { name: \"集會類支出\", amount: 0 },\n          { name: \"交通旅運類支出\", amount: 0 },\n          { name: \"雜支類支出\", amount: 0}\n        ]\n      }\n    }\n    return new ReferendumFinanceData(finance, referendum.no)\n  })\n  const incomeTitles = referendumFinanceDatas[0].incomeTitles\n  const outcomeTitles = referendumFinanceDatas[0].outcomeTitles\n  const incomeDatas = referendumFinanceDatas.map((referendumFinanceData) => (referendumFinanceData.incomeAmounts))\n  const outcomeDatas = referendumFinanceDatas.map((referendumFinanceData) => (referendumFinanceData.outcomeAmounts))\n  incomeDatas.unshift(incomeTitles)\n  outcomeDatas.unshift(outcomeTitles)\n  return(\n    <div className={ styles.candidatesFinanceCompareChart }>\n      <div className={ styles.candidatesFinanceCompareChartWrapper }>\n        <h3>收入比較</h3>\n        <Chart\n          chartType=\"ColumnChart\"\n          height={'600px'}\n          loader={<div>Loading Chart</div>}\n          data={ incomeDatas }\n          options={{\n            title: null,\n            isStacked: true,\n            vAxis: {\n              textPosition: 'left',\n              minValue: 0,\n            },\n            legend: {\n              position: 'none'\n            },\n            colors: incomeColorsSet\n          }}\n        />\n      </div>\n      <div className={ styles.candidatesFinanceCompareChartWrapper }>\n        <h3>支出比較</h3>\n        <Chart\n          chartType=\"ColumnChart\"\n          height={'600px'}\n          loader={<div>Loading Chart</div>}\n          data={ outcomeDatas }\n          options={{\n            title: null,\n            isStacked: true,\n            vAxis: {\n              textPosition: 'left',\n              minValue: 0,\n            },\n            legend: {\n              position: 'none'\n            },\n            colors: outcomeColorsSet\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport Img from \"gatsby-image\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport styles from '../stylesheets/referendum.module.sass'\nimport { ReferendumFinanceBlock, ReferendumsFinanceCompareChart } from \"../components/referendum_finance_data\"\n\nexport const query = graphql`\n  query {\n    allReferendumsJson {\n      nodes {\n        id\n        no\n        passed\n        rate_of_vote\n        affirmative\n        negative\n        content\n        finance {\n          income {\n            total\n            items {\n              amount\n              name\n            }\n          }\n          outcome {\n            total\n            items {\n              amount\n              name\n            }\n          }\n        }\n      }\n    }\n    flagImage: file(relativePath: { eq: \"flag.png\" }) {\n      childImageSharp {\n        fixed(width: 36) {\n          ...GatsbyImageSharpFixed\n        }\n      }\n    }\n  }\n`\n\nconst ReferendumsIndexPage = ({ data }) => {\n  const referendumblocks = data.allReferendumsJson.nodes.map((referendum) => {\n    return(\n      <ReferendumBlock referendum={ referendum } />\n    )\n  })\n  return(\n    <Layout>\n      <SEO title=\"公投 | 選舉金流\" />\n      <h1 className={ styles.pageHeading }>\n        <Img fixed={ data.flagImage.childImageSharp.fixed } className={ styles.decorationImage } />\n        公投\n      </h1>\n      { referendumblocks }\n      <ReferendumsFinanceCompareChart referendums={data.allReferendumsJson.nodes} />\n    </Layout>\n  )\n}\n\nconst ReferendumBlock = ({ referendum }) =>{\n  return(\n    <div className={ styles.referendumBlock}>\n      <h3>{ referendum.no }</h3>\n      <div className={ styles.referendumInfoWrapper}>\n        <p className={ styles.referendumContent }>{ referendum.content }</p>\n        <div>\n          <h5>{ referendum.passed ? '通過' : '未通過' }</h5>\n          <h6>同意票: {referendum.affirmative }</h6>\n          <h6>不同意票: { referendum.negative }</h6>\n          <h6>投票率: { referendum.rate_of_vote }</h6>\n        </div>\n      </div>\n      <h5>財務資料:</h5>\n      <ReferendumFinanceBlock finance={ referendum.finance } />\n      <hr/>\n    </div>\n  )\n}\n\nexport default ReferendumsIndexPage\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageHeading\":\"referendum-module--pageHeading--wOD0w\",\"decorationImage\":\"referendum-module--decorationImage--3X_p1\",\"referendumInfoWrapper\":\"referendum-module--referendumInfoWrapper--3-Pzb\",\"constituenciesLinks\":\"referendum-module--constituenciesLinks--9MTn2\",\"constituencyLink\":\"referendum-module--constituencyLink--284G1\",\"candidateFinanceBlock\":\"referendum-module--candidateFinanceBlock--2J7Fz\",\"candidateFinanceDetailBlock\":\"referendum-module--candidateFinanceDetailBlock--37fcM\",\"candidatesFinanceCompareChart\":\"referendum-module--candidatesFinanceCompareChart--2r8K1\",\"candidatesFinanceCompareChartWrapper\":\"referendum-module--candidatesFinanceCompareChartWrapper--3oph9\"};"],"sourceRoot":""}